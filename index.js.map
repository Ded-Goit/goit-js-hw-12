{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Import the axios library to make HTTP requests\nimport axios from 'axios';\n// Declare an asynchronous function to retrieve images by query\nconst API_KEY = '49617866-877f488ac6d2fa69158bf0643';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n  const params = new URLSearchParams({\n    key: API_KEY, // Pass our API key\n    q: query, // Search query entered by the user\n    image_type: 'photo', // Image type: photo\n    orientation: 'horizontal', // Image orientation: horizontal\n    safesearch: true, // Enable safe search\n    page: page,\n    per_page: PER_PAGE,\n  });\n  const response = await fetch(`${BASE_URL}?${params}`);\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n  const data = await response.json();\n  return data;\n}\n/*console.log(getImagesByQuery());*/\n","// Import the SimpleLightbox library to create a modal image window\nimport SimpleLightbox from 'simplelightbox';\n// Import the styles for SimpleLightbox\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// Get a reference to the gallery container from the DOM\nconst gallery = document.querySelector('.gallery');\n\nconst loader = document.querySelector('.loader');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionSelector: 'img',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n// Function to create and display image gallery\nexport function createGallery(images) {\n  // Generate HTML markup for each image\n  const markup = images\n    .map(\n      ({\n        webformatURL, // Image URL for preview\n        largeImageURL, // Large image URL for modal\n        tags, // Image description (alternative text)\n        likes, // Number of likes\n        views, // Number of views\n        comments, // Number of comments\n        downloads, // Number of downloads\n      }) => `\n    <li class=\"gallery-item\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes:</b> ${likes}</p>\n        <p><b>Views:</b> ${views}</p>\n        <p><b>Comments:</b> ${comments}</p>\n        <p><b>Downloads:</b> ${downloads}</p>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n  // Add the generated markup to the gallery container\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh(); // Update the SimpleLightbox instance for new gallery items\n}\n// Function to clear the gallery\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n// Function to show the loading indicator\nexport function showLoader() {\n  /*console.log(' show Loader');*/\n  document.querySelector('.loader').classList.remove('hidden');\n}\n// Function to hide the loading indicator\nexport function hideLoader() {\n  /*console.log(' hide Loader');*/\n  document.querySelector('.loader').classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n  document.querySelector(`.gallery-button`).classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n  document.querySelector(`.gallery-button`).classList.add('hidden');\n}\n","// Import the library for displaying notifications\nimport iziToast from 'izitoast';\n// Import styles for iziToast\nimport 'izitoast/dist/css/iziToast.min.css';\n// Import the necessary modules and functions\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst loadMoreBtn = document.querySelector('.gallery-button');\n\n// Get a link to the search form from the DOM\nconst form = document.querySelector('.form');\n\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n// Add an event handler for the form on the 'submit' event\nform.addEventListener('submit', async event => {\n  event.preventDefault(); // Prevent the default form behavior (page reload)\n  // Get the search query value and remove extra spaces\n  currentQuery = event.target.elements['search-text'].value.trim();\n  if (!currentQuery) {\n    // If the search field is empty, display an error message\n    iziToast.error({ message: 'Please enter a search term!' });\n    return;\n  }\n  currentPage = 1;\n  clearGallery(); // Clear previous search results\n  hideLoadMoreButton();\n  await fetchImages();\n});\n/*console.log(form);*/\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  await fetchImages();\n});\n/*console.log(fetchImages());*/\n\nasync function fetchImages() {\n  showLoader();\n  // Make a GET request to Pixabay API with the required parameters\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      // If no images are found, display a warning\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n    createGallery(data.hits);\n    if (currentPage * 15 >= totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n    smoothScroll();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    // In case of an error, display an error message\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n    });\n  } finally {\n    hideLoader(); // Hide the loading indicator regardless of the result\n  }\n}\n\nfunction smoothScroll() {\n  const { heigth: cardHeight } = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n// cod for button load more\ndocument.querySelector('.gallery-button').onmousemove = e => {\n  const x = e.pageX - e.target.offsetLeft;\n  const y = e.pageY - e.target.offsetTop;\n\n  e.target.style.setProperty('--x', `${x}px`);\n  e.target.style.setProperty('--y', `${y}px`);\n};\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","response","gallery","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","loadMoreBtn","form","currentQuery","currentPage","totalHits","event","iziToast","fetchImages","data","smoothScroll","error","cardHeight","x","y"],"mappings":"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"}